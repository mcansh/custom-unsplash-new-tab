!function(e){function t(n){if(o[n])return o[n].exports;var c=o[n]={i:n,l:!1,exports:{}};return e[n].call(c.exports,c,c.exports,t),c.l=!0,c.exports}var o={};return t.m=e,t.c=o,t.i=function(e){return e},t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,o){"use strict";o.d(t,"a",function(){return n}),o.d(t,"b",function(){return c});var n="551c50eda7975cf9ef9aaa4e043667f7566231fb7f09992b748630f2bfd81e8b",c="087479c2e8aed540a1ff89cbc306a2a317d21df98bcee598119c7bcbd0837290"},function(e,t,o){"use strict";function n(){document.querySelector(".popover").classList.toggle("is-visible")}function c(){document.querySelector(".popover").classList.remove("is-visible")}function r(e){e.preventDefault(),fetch("https://api.unsplash.com/photos/"+_+"/like?access_token="+w,{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(){k.classList.add("liked")}),fetch("https://unsplash.com/photos/"+_+"/stats",{method:"GET",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){document.querySelector("#like span").textContent=e.likes}).catch(function(e){console.error(e)})}function i(e){e.preventDefault(),fetch("https://api.unsplash.com/photos/"+_+"/like",{method:"DELETE",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(){k.classList.remove("liked")})}function s(){fetch("https://unsplash.com/oauth/token/?client_id="+l.a+"&client_secret="+l.b+"&redirect_uri="+g+"&code="+S+"&grant_type=authorization_code",{method:"POST",mode:"cors"}).then(function(e){return e.json()}).then(function(e){w=e.access_token,localStorage.setItem("accessToken",w),a()}).catch(function(e){console.error(e)})}function a(){window.location.href=g}Object.defineProperty(t,"__esModule",{value:!0});var l=o(0),u="https://api.unsplash.com/photos/random?&featured&client_id="+l.a,d=document.querySelector("main"),p=document.querySelector("#download"),h=document.querySelector("#more"),f=document.querySelector("#profile"),m=document.querySelector("#name"),k=document.querySelector("#like"),v=document.querySelector("#location"),y=document.querySelector("#view"),b=document.querySelector("#login"),g="http://"+window.location.hostname;g="http://mcansh.local"===g?"http://mcansh.local:5757/":"https://mcansh.github.io/unsplash-new-tab/";var _=void 0,S=void 0,w=localStorage.getItem("accessToken"),q="https://unsplash.com/oauth/authorize?client_id="+l.a+"&redirect_uri="+g+"&response_type=code&scope=public+read_user+write_likes";null!==w&&void 0!==w||(k.href=q),b.href=q,fetch(u,{method:"GET",mode:"cors"}).then(function(e){return e.json()}).then(function(e){d.style.backgroundColor=e.color,d.style.backgroundImage="url("+e.links.download+")",_=e.id,y.href=e.links.html,f.style.backgroundImage="url("+e.user.profile_image.large+")",p.href=e.links.download,m.href=e.user.links.html,m.textContent=e.user.name,document.querySelector("#like span").textContent=e.likes,null!==e.location?(v.textContent=e.user.location,v.href="https://unsplash.com/search/"+e.user.location):v.remove()}),h.addEventListener("click",n),d.addEventListener("click",c),k.classList.contains("liked")?k.addEventListener("click",i):k.addEventListener("click",r),document.location.search.length&&!function(){var e=window.location.search,t=decodeURIComponent(e),o=/^code=/,n=t.split("?");if(n.length){var c=n[1].split("&");c.forEach(function(e){e.match(o)&&(S=e.replace(o,""),S=S.replace("/",""))})}S&&(console.log("CODE: "+S),window.code=S,s())}()}]);
//# sourceMappingURL=bundle.js.map