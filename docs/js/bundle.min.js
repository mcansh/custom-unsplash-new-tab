!function(e){function t(n){if(o[n])return o[n].exports;var c=o[n]={i:n,l:!1,exports:{}};return e[n].call(c.exports,c,c.exports,t),c.l=!0,c.exports}var o={};return t.m=e,t.c=o,t.i=function(e){return e},t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,o){"use strict";o.d(t,"a",function(){return n});var n=document.querySelector.bind(document);document.querySelectorAll.bind(document);Node.prototype.on=window.on=function(e,t){this.addEventListener(e,t)},NodeList.prototype.__proto__=Array.prototype,NodeList.prototype.on=NodeList.prototype.addEventListener=function(e,t){this.forEach(function(o,n){o.on(e,t)})}},function(e,t,o){"use strict";o.d(t,"a",function(){return n}),o.d(t,"b",function(){return c});var n="551c50eda7975cf9ef9aaa4e043667f7566231fb7f09992b748630f2bfd81e8b",c="087479c2e8aed540a1ff89cbc306a2a317d21df98bcee598119c7bcbd0837290"},function(e,t,o){"use strict";function n(){location.href=S}function c(){o.i(h.a)(".popover").classList.toggle("is-visible")}function i(){fetch("https://unsplash.com/oauth/token/?client_id="+f.a+"&client_secret="+f.b+"&redirect_uri="+S+"&code="+T+"&grant_type=authorization_code",{method:"POST"}).then(function(e){return e.json()}).then(function(e){x=e.access_token,localStorage.setItem("accessToken",x),n()}).catch(function(e){console.error(e)})}function a(){fetch("https://api.unsplash.com/photos/"+C+"/stats?access_token="+x,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){o.i(h.a)("#like span").textContent=e.likes}).catch(function(e){console.error(e)})}function s(e){e.preventDefault(),fetch("https://api.unsplash.com/photos/"+C+"/like?access_token="+x,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(){L.classList.add("liked")}),a()}function r(e){e.preventDefault(),fetch("https://api.unsplash.com/photos/"+C+"/like?access_token="+x,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(){L.classList.remove("liked")}),a()}function l(e){var t=o.i(h.a)("#query").value;console.log(t),localStorage.setItem("searchQuery",t),p(),e.preventDefault()}function u(){var e=o.i(h.a)("#query");e.value=v}function d(e){document.querySelector("#modal").classList.contains("active")&&27===e.keyCode&&(o.i(h.a)("#modal").classList.toggle("active"),o.i(h.a)("body").classList.toggle("blur"))}function p(){o.i(h.a)("#modal").classList.toggle("active"),o.i(h.a)("body").classList.toggle("blur")}Object.defineProperty(t,"__esModule",{value:!0});var h=o(0),f=o(1),m=void 0,v=localStorage.getItem("searchQuery");m=null===v?"https://api.unsplash.com/photos/random?&featured&client_id="+f.a:"https://api.unsplash.com/photos/random?query="+v+"&featured&client_id="+f.a;var g=o.i(h.a)("main"),k=o.i(h.a)("#download"),y=o.i(h.a)("#more"),b=o.i(h.a)("#profile"),_=o.i(h.a)("#name"),L=o.i(h.a)("#like"),E=o.i(h.a)("#location"),w=o.i(h.a)("#view"),j=o.i(h.a)("#login"),x=localStorage.getItem("accessToken"),C=void 0,T=void 0,S=void 0,I="https://unsplash.com/oauth/authorize?client_id="+f.a+"&redirect_uri="+S+"&response_type=code&scope=public+read_user+write_likes";null!==x&&void 0!==x||(L.href=I),"chrome-extension:"===location.protocol?(S=location.origin+"/index.html",console.log(S)):"http://"+location.hostname=="http://mcansh.local"?(S="http://mcansh.local:5757/",console.log(S)):(S="https://mcansh.github.io/unsplash-new-tab/",console.log(S)),j.href=I,fetch(m,{method:"GET"}).then(function(e){return e.json()}).then(function(e){C=e.id,g.style.backgroundColor=e.color,g.style.backgroundImage="url(https://unsplash.com/photos/"+e.id+"/download)",w.href=e.links.html,b.style.backgroundImage="url("+e.user.profile_image.large+")",k.href=e.links.download,_.href=e.user.links.html,_.textContent=e.user.name,o.i(h.a)("#like span").textContent=e.likes,null!==e.location?(E.textContent=e.user.location,E.href="https://unsplash.com/search/"+e.user.location):E.remove()}),y.addEventListener("click",c),location.search.length&&!function(){var e=window.location.search,t=decodeURIComponent(e),o=/^code=/,c=t.split("?");if(c.length){var a=c[1].split("&");a.forEach(function(e){e.match(o)&&(T=e.replace(o,""),T=T.replace("/",""))})}T?(console.log("CODE: "+T),window.code=T,i()):(console.error("no login code = no login for you"),n())}(),L.classList.contains("liked")?L.addEventListener("click",r):L.addEventListener("click",s),o.i(h.a)("#save").addEventListener("click",l),u(),o.i(h.a)("#settings").addEventListener("click",p),o.i(h.a)("#close").addEventListener("click",p),document.addEventListener("keyup",d)}]);
//# sourceMappingURL=bundle.js.map