!function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=document.querySelector.bind(document);document.querySelectorAll.bind(document);Node.prototype.on=window.on=function(e,t){this.addEventListener(e,t)},NodeList.prototype.__proto__=Array.prototype,NodeList.prototype.on=NodeList.prototype.addEventListener=function(e,t){this.forEach(function(n,o){n.on(e,t)})}},function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i});var o="551c50eda7975cf9ef9aaa4e043667f7566231fb7f09992b748630f2bfd81e8b",i="087479c2e8aed540a1ff89cbc306a2a317d21df98bcee598119c7bcbd0837290"},function(e,t,n){"use strict";function o(){location.href=G}function i(e){e.preventDefault(),n.i(v.a)(".popover").classList.toggle("is-visible")}function c(){fetch("https://unsplash.com/oauth/token/?client_id="+g.a+"&client_secret="+g.b+"&redirect_uri="+G+"&code="+P+"&grant_type=authorization_code",{method:"POST"}).then(function(e){return e.json()}).then(function(e){console.log(e.access_token),q=e.access_token,localStorage.setItem("accessToken",q),o()}).catch(function(e){console.error(e)})}function a(){fetch(k+"/photos/"+A+"/stats?access_token="+q,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){n.i(v.a)("#like span").textContent=e.likes}).catch(function(e){console.error(e)})}function r(e){e.preventDefault(),fetch(k+"/photos/"+A+"/like?access_token="+q,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(){C.classList.add("liked")}),a()}function s(e){e.preventDefault(),fetch(k+"/photos/"+A+"/like?access_token="+q,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(){C.classList.remove("liked")}),a()}function l(){var e=n.i(v.a)("#query").value;console.log(e),localStorage.setItem("searchQuery",e),location.reload()}function u(){var e=n.i(v.a)("#query");e.value=b}function d(e){e.preventDefault(),n.i(v.a)("#exif + .popover").classList.toggle("is-visible")}function p(e){e.preventDefault(),n.i(v.a)("#settings + .popover").classList.toggle("is-visible")}function f(){fetch(k+"/me/?access_token="+q,{method:"GET"}).then(function(e){return e.json()}).then(function(e){N=e.username,fetch(k+"/users/"+N+"/collections/?access_token="+q,{method:"GET"}).then(function(e){return e.json()}).then(function(e){window.myCollections=e.map(function(e,t){return e.id}),n.i(v.a)("#add + .popover ul").innerHTML=M.map(function(e,t){return'\n            <li>\n              <a href="#">'+e.id+"</a>\n            </li>\n          "}).join("")})})}function h(){n.i(v.a)("#add + .popover").classList.toggle("is-visible")}function m(){n.i(v.a)(".popover").classList.remove("is-visible")}Object.defineProperty(t,"__esModule",{value:!0});var v=n(0),g=n(1),k="https://api.unsplash.com",_=void 0,b=localStorage.getItem("searchQuery");_=null===b?k+"/photos/random?&featured&client_id="+g.a:k+"/photos/random?query="+b+"&featured=true&client_id="+g.a;var y=n.i(v.a)("main"),L=n.i(v.a)("#download"),E=n.i(v.a)("#more"),w=n.i(v.a)("#profile"),x=n.i(v.a)("#name"),C=n.i(v.a)("#like"),j=n.i(v.a)("#location"),T=n.i(v.a)("#view"),S=n.i(v.a)("#login"),D=n.i(v.a)(".make.model"),I=n.i(v.a)(".res"),O=n.i(v.a)(".downloads"),q=localStorage.getItem("accessToken"),A=void 0,P=void 0,G="http://mcansh.local:5757",N=void 0,M=void 0,z="https://unsplash.com/oauth/authorize?client_id="+g.a+"&redirect_uri="+G+"&response_type=code&scope=public+read_user+write_likes+read_collections+write_collections";null===q||void 0===q?C.href=z:S.parentElement.remove(),"chrome-extension:"===location.protocol?(G=location.origin+"/index.html",console.log(G)):"mcansh.local"===location.hostname?(G="http://mcansh.local:5757/",console.log(G)):(G="https://mcansh.github.io/unsplash-new-tab/",console.log(G)),S.href=z,fetch(_,{method:"GET"}).then(function(e){return e.json()}).then(function(e){A=e.id,y.style.backgroundColor=e.color,y.style.backgroundImage="url(https://unsplash.com/photos/"+e.id+"/download)",T.href=e.links.html,w.style.backgroundImage="url("+e.user.profile_image.large+")",L.href=e.links.download,x.href=e.user.links.html,x.textContent=e.user.name,n.i(v.a)("#like span").textContent=e.likes,null!==e.exif.model?D.textContent="Camera: "+e.exif.model:D.remove(),I.textContent="Resolution: "+e.width+"x"+e.height,O.textContent="Downloads: "+e.downloads.toLocaleString(),null!==e.location?(j.textContent=e.user.location,j.href="https://unsplash.com/search/"+e.user.location):j.remove()}),location.search.length&&!function(){var e=window.location.search,t=decodeURIComponent(e),n=/^code=/,i=t.split("?");if(i.length){var a=i[1].split("&");a.forEach(function(e){e.match(n)&&(P=e.replace(n,""),P=P.replace("/",""))})}P?(console.log("CODE: "+P),window.code=P,c()):(console.error("no login code = no login for you"),o())}(),C.classList.contains("liked")?(C.addEventListener("click",s),C.removeEventListener("click",r)):(C.addEventListener("click",r),C.removeEventListener("click",s)),u(),n.i(v.a)("#save").addEventListener("click",l),E.addEventListener("click",i),n.i(v.a)("#settings").addEventListener("click",p),n.i(v.a)("#exif").addEventListener("click",d),f(),n.i(v.a)("#add").addEventListener("click",h),n.i(v.a)("main").addEventListener("click",m),n.i(v.a)(".button").addEventListener("click",m),document.addEventListener("keyup",function(e){13===e.keyCode&&l()})}]);
//# sourceMappingURL=bundle.js.map