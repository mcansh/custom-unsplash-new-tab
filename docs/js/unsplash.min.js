"use strict";function showMore(){document.querySelector(".popover").classList.toggle("is-visible")}function hideMore(){document.querySelector(".popover").classList.remove("is-visible")}function likeThePhoto(){fetch("https://api.unsplash.com/photos/"+photoId+"/like?access_token="+accessToken,{method:"POST"}).then(function(){likePhoto.classList.add("liked")})}function logMeIn(){fetch("https://unsplash.com/oauth/token/?client_id="+authToken+"&client_secret="+applicationSecret+"&redirect_uri="+redirectURI+"&code="+code+"&grant_type=authorization_code",{method:"POST"}).then(function(e){return e.json()}).then(function(e){window.accessToken=e.access_token,localStorage.setItem("accessToken",accessToken)}).catch(function(e){console.error(e)}),redirectMe()}function showMe(){fetch("https://api.unsplash.com/me").then(function(e){return e.json()}).then(function(e){console.log(e)})}function redirectMe(){window.location.href=redirectURI}var authToken="551c50eda7975cf9ef9aaa4e043667f7566231fb7f09992b748630f2bfd81e8b",applicationSecret="087479c2e8aed540a1ff89cbc306a2a317d21df98bcee598119c7bcbd0837290",url="https://api.unsplash.com/photos/random?&featured&client_id="+authToken,main=document.querySelector("main"),download=document.querySelector("#download"),moreButton=document.querySelector("#more"),profile=document.querySelector("#profile"),userName=document.querySelector("#name"),likePhoto=document.querySelector("#like"),photoLocation=document.querySelector("#location"),viewOnUnsplash=document.querySelector("#view"),login=document.querySelector("#login"),loginURL="https://unsplash.com/oauth/authorize?client_id="+authToken+"&redirect_uri="+redirectURI+"&response_type=code&scope=public+read_user+write_likes",redirectURI="http://"+window.location.hostname;redirectURI="http://mcansh.local"===redirectURI?"http://mcansh.local:5757/":"https://mcansh.github.io/unsplash-new-tab/";var photoId=void 0,code=void 0,accessToken=localStorage.getItem("accessToken");fetch(url).then(function(e){return e.json()}).then(function(e){main.style.backgroundColor=e.color,main.style.backgroundImage="url("+e.links.download+")",photoId=e.id,viewOnUnsplash.href=e.links.html,profile.style.backgroundImage="url("+e.user.profile_image.large+")",download.href=e.links.download,userName.href=e.user.links.html,userName.textContent=e.user.name,document.querySelector("#like span").textContent=e.likes,null!==e.location?(photoLocation.textContent=e.user.location,photoLocation.href="https://unsplash.com/search/"+e.user.location):photoLocation.remove()}),moreButton.addEventListener("click",showMore),main.addEventListener("click",hideMore),likePhoto.addEventListener("click",likeThePhoto),null!==accessToken&&void 0!==accessToken||(likePhoto.href=loginURL),login.href=loginURL,document.location.search.length&&!function(){var e=window.location.search,o=decodeURIComponent(e),t=/^code=/,n=o.split("?");if(n.length){var c=n[1].split("&");c.forEach(function(e){e.match(t)&&(code=e.replace(t,""),code=code.replace("/",""))})}code&&(console.log("CODE: "+code),window.code=code,logMeIn())}();